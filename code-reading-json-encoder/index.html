<!DOCTYPE html>
<html lang=ko>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    
    <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=1, minimum-scale=0.8" />
    
    <meta name="description" content="json - JSON encoder and decoder ì¶œì²˜ : https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;json.html ì½”ë“œ : https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;blob&#x2F;3.7&#x2F;Lib&#x2F;json&#x2F;encoder.py  íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° ì²« ë²ˆì§¸ ì‹œë¦¬ì¦ˆëŠ” jsonì…ë‹ˆë‹¤.  import json ê°œë°œ ì¤‘ í”">
<meta property="og:type" content="article">
<meta property="og:title" content="íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json&#x2F;encoder.py">
<meta property="og:url" content="https://urangurang.github.io/code-reading-json-encoder/index.html">
<meta property="og:site_name" content="urangurang">
<meta property="og:description" content="json - JSON encoder and decoder ì¶œì²˜ : https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;json.html ì½”ë“œ : https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;blob&#x2F;3.7&#x2F;Lib&#x2F;json&#x2F;encoder.py  íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° ì²« ë²ˆì§¸ ì‹œë¦¬ì¦ˆëŠ” jsonì…ë‹ˆë‹¤.  import json ê°œë°œ ì¤‘ í”">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://urangurang.github.io/images/json-encoder/json_encoder_structure_01.png">
<meta property="article:published_time" content="2019-08-27T05:04:44.000Z">
<meta property="article:modified_time" content="2020-02-17T11:41:09.000Z">
<meta property="article:author" content="urangurang">
<meta property="article:tag" content="python">
<meta property="article:tag" content="JSON">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://urangurang.github.io/images/json-encoder/json_encoder_structure_01.png">
    

    
        
            
                <link rel="shortcut icon" href="/images/favicon.ico">
            
        
        
            
                <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
            
        
        
            
                <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
            
        
    
    <!-- title -->
    <title>íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json/encoder.py</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archive</a></li>
         
          <li><a href="/categories/">Category</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/code-reading-json-decoder-scanner/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/code-reading-json-init/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://urangurang.github.io/code-reading-json-encoder/" target="_blank" rel="noopener"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://urangurang.github.io/code-reading-json-encoder/&text=íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json/encoder.py" target="_blank" rel="noopener"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://urangurang.github.io/code-reading-json-encoder/&title=íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json/encoder.py" target="_blank" rel="noopener"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json/encoder.py&body=Check out this article: https://urangurang.github.io/code-reading-json-encoder/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#json-JSON-encoder-and-decoder"><span class="toc-number">1.</span> <span class="toc-text">json - JSON encoder and decoder</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json/encoder.py
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">urangurang</span>
      </span>
      
    <div class="postdate">
        <time datetime="2019-08-27T05:04:44.000Z" itemprop="datePublished">2019-08-27</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-caret-down"></i>
        <a class="category-link" href="/categories/python/">python</a>
    </div>

      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/JSON/" rel="tag">JSON</a>, <a class="tag-link" href="/tags/python/" rel="tag">python</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="json-JSON-encoder-and-decoder"><a href="#json-JSON-encoder-and-decoder" class="headerlink" title="json - JSON encoder and decoder"></a>json - JSON encoder and decoder</h1><ul>
<li>ì¶œì²˜ : <a href="https://docs.python.org/3/library/json.html" target="_blank" rel="noopener">https://docs.python.org/3/library/json.html</a></li>
<li>ì½”ë“œ : <a href="https://github.com/python/cpython/blob/3.7/Lib/json/encoder.py" target="_blank" rel="noopener">https://github.com/python/cpython/blob/3.7/Lib/json/encoder.py</a></li>
</ul>
<p><strong>íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸°</strong> ì²« ë²ˆì§¸ ì‹œë¦¬ì¦ˆëŠ” <code>json</code>ì…ë‹ˆë‹¤. </p>
<p><code>import json</code></p>
<p>ê°œë°œ ì¤‘ í”í•˜ê²Œ ë§Œë‚˜ë˜ <code>json</code>ì˜ ë‚´ë¶€ëŠ” ì–´ë–»ê²Œ ë˜ì–´ ìˆëŠ”ì§€ ê°™ì´ í™•ì¸í•´ë´…ì‹œë‹¤. </p>
<p>ì €ëŠ” <a href="https://github.com/python/cpython/blob/3.7/Lib/json/__init__.py" target="_blank" rel="noopener">cpython repository</a>ì—ì„œ ì½”ë“œë¥¼ í™•ì¸í•´ë´¤ìŠµë‹ˆë‹¤. íŒŒì´ì¬ ì½”ë“œëŠ” ./Lib/ ë””ë ‰í† ë¦¬ ì•„ë˜ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><code>cpython/Lib/json/</code> ë””ë ‰í† ë¦¬ì•ˆì˜ ë‚´ìš©ì…ë‹ˆë‹¤.</p>
<ul>
<li><code>__init__.py</code></li>
<li><code>decoder.py</code></li>
<li><code>encoder.py</code></li>
<li><code>scanner.py</code></li>
<li><code>tool.py</code></li>
</ul>
<p>ë³¸ ê¸€ì—ì„œëŠ” <code>encoder.py</code>ë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤. ì´ 442ì¤„ë¡œ êµ¬ì„±ëœ íŒŒì¼ë¡œ ìƒê°ë³´ë‹¤ ê·¸ë ‡ê²Œ ê¸¸ì§„ ì•ŠìŠµë‹ˆë‹¤.</p>
<p>Pycharmì„ í†µí•´ Structureë¥¼ ë³´ë©´ </p>
<p><img src="/images/json-encoder/json_encoder_structure_01.png" alt="encoder-structure"></p>
<p><code>V</code>ëŠ” ë³€ìˆ˜, <code>f</code> ë©”ì†Œë“œ, <code>C</code> í´ë˜ìŠ¤ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
<p><code>encoder.py</code> ì˜ ë³€ìˆ˜<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ESCAPE = re.compile(<span class="string">r'[\x00-\x1f\\"\b\f\n\r\t]'</span>)</span><br><span class="line">ESCAPE_ASCII = re.compile(<span class="string">r'([\\"]|[^\ -~])'</span>)</span><br><span class="line">HAS_UTF8 = re.compile(<span class="string">b'[\x80-\xff]'</span>)</span><br><span class="line">ESCAPE_DCT = &#123;</span><br><span class="line">    <span class="string">'\\'</span>: <span class="string">'\\\\'</span>,</span><br><span class="line">    <span class="string">'"'</span>: <span class="string">'\\"'</span>,</span><br><span class="line">    <span class="string">'\b'</span>: <span class="string">'\\b'</span>,</span><br><span class="line">    <span class="string">'\f'</span>: <span class="string">'\\f'</span>,</span><br><span class="line">    <span class="string">'\n'</span>: <span class="string">'\\n'</span>,</span><br><span class="line">    <span class="string">'\r'</span>: <span class="string">'\\r'</span>,</span><br><span class="line">    <span class="string">'\t'</span>: <span class="string">'\\t'</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>x20):</span><br><span class="line">    ESCAPE_DCT.setdefault(chr(i), <span class="string">'\\u&#123;0:04x&#125;'</span>.format(i))</span><br><span class="line">    <span class="comment">#ESCAPE_DCT.setdefault(chr(i), '\\u%04x' % (i,))</span></span><br><span class="line"></span><br><span class="line">INFINITY = float(<span class="string">'inf'</span>)</span><br></pre></td></tr></table></figure></p>
<p><code>ESCAPE</code>, <code>ESCAPE_ASCII</code>, <code>HAS_UTF8</code> ì„¸ ë³€ìˆ˜ëŠ” <code>re.compile()</code> ë©”ì†Œë“œì˜ ë°˜í™˜ ê°’ìœ¼ë¡œ <code>regular expression object</code> ì…ë‹ˆë‹¤.<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="class"><span class="keyword">type</span>(<span class="type">ESCAPE</span>)</span></span><br><span class="line">&lt;<span class="keyword">class</span> '_sre.<span class="type">SRE_Pattern'</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p><code>ESCAPE_DCT</code>ëŠ” ë”•ì…”ë„ˆë¦¬ íƒ€ì…ì˜ ë³€ìˆ˜ë¡œ 0~31ê¹Œì§€ì˜ ì •ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œìœ¼ë©°, ì‹¤ì œë¡œ ì•„ë˜ í‘œì˜ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. </p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>chr(index)</code></td>
<td><code>\\u{0:04x}&#39;.format(i)</code></td>
</tr>
<tr>
<td>ì´í•˜ ì‹¤ì œ ê°’</td>
</tr>
<tr>
<td>â€˜\x00â€™</td>
<td>â€˜\u0000â€™</td>
</tr>
<tr>
<td>â€˜\x01â€™</td>
<td>â€˜\u0001â€™</td>
</tr>
<tr>
<td>â€˜\x02â€™</td>
<td>â€˜\u0002â€™</td>
</tr>
<tr>
<td>â€˜\x03â€™</td>
<td>â€˜\u0003â€™</td>
</tr>
<tr>
<td>â€˜\x04â€™</td>
<td>â€˜\u0004â€™</td>
</tr>
<tr>
<td>â€˜\x05â€™</td>
<td>â€˜\u0005â€™</td>
</tr>
<tr>
<td>â€˜\x06â€™</td>
<td>â€˜\u0006â€™</td>
</tr>
<tr>
<td>â€˜\x07â€™</td>
<td>â€˜\u0007â€™</td>
</tr>
<tr>
<td>â€˜\x08â€™</td>
<td>â€˜\u0008â€™</td>
</tr>
<tr>
<td>â€˜\tâ€™</td>
<td>â€˜\tâ€™</td>
</tr>
<tr>
<td>â€˜\nâ€™</td>
<td>â€˜\nâ€™</td>
</tr>
<tr>
<td>â€˜\x0bâ€™</td>
<td>â€˜\u000bâ€™</td>
</tr>
<tr>
<td>â€˜\x0câ€™</td>
<td>â€˜\u000câ€™</td>
</tr>
<tr>
<td>â€˜\râ€™</td>
<td>â€˜\râ€™</td>
</tr>
<tr>
<td>â€˜\x0eâ€™</td>
<td>â€˜\u000eâ€™</td>
</tr>
<tr>
<td>â€˜\x0fâ€™</td>
<td>â€˜\u000fâ€™</td>
</tr>
<tr>
<td>â€˜\x10â€™</td>
<td>â€˜\u0010â€™</td>
</tr>
<tr>
<td>â€˜\x11â€™</td>
<td>â€˜\u0011â€™</td>
</tr>
<tr>
<td>â€˜\x12â€™</td>
<td>â€˜\u0012â€™</td>
</tr>
<tr>
<td>â€˜\x13â€™</td>
<td>â€˜\u0013â€™</td>
</tr>
<tr>
<td>â€˜\x14â€™</td>
<td>â€˜\u0014â€™</td>
</tr>
<tr>
<td>â€˜\x15â€™</td>
<td>â€˜\u0015â€™</td>
</tr>
<tr>
<td>â€˜\x16â€™</td>
<td>â€˜\u0016â€™</td>
</tr>
<tr>
<td>â€˜\x17â€™</td>
<td>â€˜\u0017â€™</td>
</tr>
<tr>
<td>â€˜\x18â€™</td>
<td>â€˜\u0018â€™</td>
</tr>
<tr>
<td>â€˜\x19â€™</td>
<td>â€˜\u0019â€™</td>
</tr>
<tr>
<td>â€˜\x1aâ€™</td>
<td>â€˜\u001aâ€™</td>
</tr>
<tr>
<td>â€˜\x1bâ€™</td>
<td>â€˜\u001bâ€™</td>
</tr>
<tr>
<td>â€˜\x1câ€™</td>
<td>â€˜\u001câ€™</td>
</tr>
<tr>
<td>â€˜\x1dâ€™</td>
<td>â€˜\u001eâ€™</td>
</tr>
<tr>
<td>â€˜\x1eâ€™</td>
<td>â€˜\u001dâ€™</td>
</tr>
<tr>
<td>â€˜\x1fâ€™</td>
<td>â€˜\u001fâ€™</td>
</tr>
</tbody>
</table>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ESCAPE_DCT = &#123;</span><br><span class="line">    <span class="string">'\\'</span>: <span class="string">'\\\\'</span>,</span><br><span class="line">    <span class="string">'"'</span>: <span class="string">'\\"'</span>,</span><br><span class="line">    <span class="string">'\b'</span>: <span class="string">'\\b'</span>,</span><br><span class="line">    <span class="string">'\f'</span>: <span class="string">'\\f'</span>,</span><br><span class="line">    <span class="string">'\n'</span>: <span class="string">'\\n'</span>,</span><br><span class="line">    <span class="string">'\r'</span>: <span class="string">'\\r'</span>,</span><br><span class="line">    <span class="string">'\t'</span>: <span class="string">'\\t'</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0x20</span>):</span><br><span class="line">    ESCAPE_DCT.setdefault(chr(i), <span class="string">'\\u&#123;0:04x&#125;'</span>.format(i))</span><br><span class="line">    #ESCAPE_DCT.setdefault(chr(i), <span class="string">'\\u%04x'</span> % (i,))</span><br></pre></td></tr></table></figure>
<p><code>setdefault()</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ í‚¤ ë°¸ë¥˜ ë§µí•‘ì„ í–ˆê¸°ë•Œë¬¸ì— <code>ESCAPE_DCT</code> ë³€ìˆ˜ ì„ ì–¸ ì‹œ ì…ë ¥ëœ <code>\n</code>, <code>\r</code>, <code>\t</code> ë“±ì˜ í‚¤ëŠ” ê°’ì˜ ë³€í™”ì—†ì´ ì²« ë³€ìˆ˜ ì„ ì–¸ ë‹¹ì‹œì˜ ê°’ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p><code>chr(i)</code> íŒŒì´ì¬ ë¹ŒíŠ¸ì¸ ë©”ì†Œë“œë¡œ ì…ë ¥ëœ ì •ìˆ˜ íŒŒë¼ë¯¸í„°ë¥¼ ìœ ë‹ˆì½”ë“œ ìŠ¤íŠ¸ë§ í˜•íƒœë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. ë˜ ë‹¤ë¥¸ ë¹ŒíŠ¸ì¸ ë©”ì†Œë“œ <code>ord()</code>ì˜ ë°˜ëŒ€ì´ê¸°ë„ í•©ë‹ˆë‹¤.<br><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="function"><span class="title">chr</span>(<span class="number">65</span>)</span></span><br><span class="line"><span class="string">'A'</span></span><br><span class="line">&gt;&gt;&gt; <span class="function"><span class="title"><span class="built_in">ord</span></span>(<span class="string">'A'</span>)</span></span><br><span class="line"><span class="number">65</span></span><br></pre></td></tr></table></figure></p>
<p>ì½”ë“œ í•´ì„ê³¼ëŠ” ë³„ê°œë¡œ ì™œ ì£¼ì„ ì²˜ë¦¬ëœ ì½”ë“œë¥¼ ì§€ìš°ì§€ ì•Šê³  ìœ ì§€í•˜ê³  ìˆëŠ”ì§€ ê¶ê¸ˆí•˜ë„¤ìš”.</p>
<p><code>INFINITY</code> ë³€ìˆ˜ëŠ” float(â€˜infâ€™) ë¥¼ í• ë‹¹ë°›ê³  ìˆìŠµë‹ˆë‹¤. íƒ€ì…ì€ ë‹¹ì—°íˆ <code>float</code> ì´ë„¤ìš”.<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; type(<span class="name">float</span>('inf'))</span><br><span class="line">&lt;class 'float'&gt;</span><br></pre></td></tr></table></figure></p>
<p>ë‹¤ìŒì€ ë©”ì†Œë“œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤. </p>
<p>ì¼ë‹¨ ì•„ë˜ ì²« ë²ˆì§¸ 4ì¤„ì˜ ì½”ë“œëŠ” <code>_json</code> ëª¨ë“ˆë¡œ ë¶€í„° <code>encode_basestring</code> ë©”ì†Œë“œë¥¼ ì„í¬íŠ¸ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì°¾ì„ ìˆ˜ ì—†ì„ ê²½ìš° <code>None</code>ì„ í• ë‹¹í•©ë‹ˆë‹¤.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> _json <span class="keyword">import</span> encode_basestring <span class="keyword">as</span> c_encode_basestring</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    c_encode_basestring = <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<p>ì¼ë‹¨ <code>_json</code> ì´ ë…€ì„ë¶€í„° ë‹¤ì‹œ ì§šê³  ë„˜ì–´ê°€ê³  ì‹¶ë„¤ìš”.<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; import json</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; json</span><br><span class="line">&lt;<span class="class"><span class="keyword">module</span> '<span class="title">json</span>' <span class="title">from</span> '/<span class="title">Library</span>/<span class="title">Frameworks</span>/<span class="title">Python</span>.<span class="title">framework</span>/<span class="title">Versions</span>/3.6/<span class="title">lib</span>/<span class="title">python3</span>.6/<span class="title">json</span>/<span class="title">__init__</span>.<span class="title">py</span>'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># From mac OS</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; import _json</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; _json</span><br><span class="line">&lt;<span class="class"><span class="keyword">module</span> '<span class="title">_json</span>' <span class="title">from</span> '/<span class="title">Library</span>/<span class="title">Frameworks</span>/<span class="title">Python</span>.<span class="title">framework</span>/<span class="title">Versions</span>/3.6/<span class="title">lib</span>/<span class="title">python3</span>.6/<span class="title">lib</span>-<span class="title">dynload</span>/<span class="title">_json</span>.<span class="title">cpython</span>-36<span class="title">m</span>-<span class="title">darwin</span>.<span class="title">so</span>'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># From linux </span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; _json</span><br><span class="line">&lt;<span class="class"><span class="keyword">module</span> '<span class="title">_json</span>' <span class="title">from</span> '/<span class="title">usr</span>/<span class="title">local</span>/<span class="title">lib</span>/<span class="title">python3</span>.7/<span class="title">lib</span>-<span class="title">dynload</span>/<span class="title">_json</span>.<span class="title">cpython</span>-37<span class="title">m</span>-<span class="title">x86_64</span>-<span class="title">linux</span>-<span class="title">gnu</span>.<span class="title">so</span>'&gt;</span></span><br></pre></td></tr></table></figure><br><code>json</code>ì˜ ê²½ìš° ì§€ê¸ˆ ë³´ê³  ìˆëŠ” íŒŒì¼ì´ ìˆëŠ” ëª¨ë“ˆê³¼ ë™ì¼í•œ ìœ„ì¹˜ì— ìˆìŠµë‹ˆë‹¤. </p>
<p><code>_json</code> ì€ <code>/lib-dynload/_json.&lt;BUILD_NAME&gt;.so</code> ìœ¼ë¡œ ë³´ì´ëŠ”êµ°ìš”. cpython ë¹Œë“œ í›„ ìƒì„±ë˜ëŠ” íŒŒì¼ë¡œ ë³´ì´ë„¤ìš”. íŒŒì¼ ê²½ë¡œ <code>cpython/Modules/_json.c</code> <a href="https://github.com/python/cpython/blob/master/Modules/_json.c" target="_blank" rel="noopener"> link</a></p>
<p><code>.so</code> í™•ì¥ìëŠ” ì´ë²ˆ ê¸°íšŒì— ì²˜ìŒë³´ê²Œ ëëŠ”ë°ìš”, <code>shared object</code>ë¼ê³  í•˜ë„¤ìš”. </p>
<p>ì°¸ê³ ìš© -&gt; <a href="https://stackoverflow.com/questions/9809213/what-are-a-and-so-files" target="_blank" rel="noopener">stack overflow ë‹µë³€ ë§í¬</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">py_encode_basestring</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""Return a JSON representation of a Python string</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">replace</span><span class="params">(match)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> ESCAPE_DCT[match.group(<span class="number">0</span>)]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'"'</span> + ESCAPE.sub(replace, s) + <span class="string">'"'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">encode_basestring = (c_encode_basestring <span class="keyword">or</span> py_encode_basestring)</span><br></pre></td></tr></table></figure>
<p>íŒŒì´ì¬ ìŠ¤íŠ¸ë§ì˜ JSON í‘œí˜„ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì‹¤ì œ ë©”ì†Œë“œì˜ ë°˜í™˜ê°’ì€ ì•„ë˜ ë³´ì´ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">json</span>.encoder</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="type">json</span>.encoder.py_encode_basestring("abcdef")</span><br><span class="line"><span class="string">'"abcdef"'</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="type">json</span>.encoder.py_encode_basestring("&#123;'key': 'value'&#125;")</span><br><span class="line"><span class="string">'"&#123;\'</span>key\<span class="string">': \'</span><span class="keyword">value</span>\<span class="string">'&#125;"'</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">encode_basestring</span> = (c_encode_basestring or py_encode_basestring)</span><br></pre></td></tr></table></figure>
<p>cpythonì˜ c_encode_basestringì„ ì„í¬íŠ¸í•  ìˆ˜ ìˆë‹¤ë©´ c_encode_basestring ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">py_encode_basestring_ascii</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""Return an ASCII-only JSON representation of a Python string</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">replace</span><span class="params">(match)</span>:</span></span><br><span class="line">        s = match.group(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> ESCAPE_DCT[s]</span><br><span class="line">        <span class="keyword">except</span> KeyError:</span><br><span class="line">            n = ord(s)</span><br><span class="line">            <span class="keyword">if</span> n &lt; <span class="number">0x10000</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">'\\u&#123;0:04x&#125;'</span>.format(n)</span><br><span class="line">                <span class="comment">#return '\\u%04x' % (n,)</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># surrogate pair</span></span><br><span class="line">                n -= <span class="number">0x10000</span></span><br><span class="line">                s1 = <span class="number">0xd800</span> | ((n &gt;&gt; <span class="number">10</span>) &amp; <span class="number">0x3ff</span>)</span><br><span class="line">                s2 = <span class="number">0xdc00</span> | (n &amp; <span class="number">0x3ff</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="string">'\\u&#123;0:04x&#125;\\u&#123;1:04x&#125;'</span>.format(s1, s2)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'"'</span> + ESCAPE_ASCII.sub(replace, s) + <span class="string">'"'</span></span><br></pre></td></tr></table></figure>
<p>íŒŒì´ì¬ ìŠ¤íŠ¸ë§ì˜ JSON í‘œí˜„ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ë‹¤ë§Œ ASCII ì½”ë“œë§Œ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
<p><code>py_encode_basestring_ascii()</code> ì•ˆì— ìˆëŠ” <code>replace()</code> ë©”ì†Œë“œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤. </p>
<p>ì²˜ìŒì— ì†Œê°œí•œ <code>ESCAPE_DCT</code>ì—ì„œ <code>match.group(0)</code>ì„ í‚¤ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤. <code>ESCAPE_DCT</code> ê°ì²´ëŠ” 0~31ê¹Œì§€ì˜ ìˆ˜ë¡œ ë§Œë“¤ì–´ì§„ <code>\x00</code> ~ <code>\x1f</code> ë¥¼ í‚¤ë¡œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì´ì™¸ì˜ í‚¤ë¡œ ì¡°íšŒí•˜ë©´ <code>KeyError</code>ë¥¼ ì¼ìœ¼ì¼œ <code>except</code> êµ¬ë¬¸ìœ¼ë¡œ ë„˜ì–´ê°€ê²Œë©ë‹ˆë‹¤. <code>ord(s)</code>ë¥¼ í†µí•´ <code>n</code>ì€ 0ì´ìƒì˜ ì •ìˆ˜ë¥¼ í• ë‹¹ë°›ìŠµë‹ˆë‹¤.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> n &lt; <span class="number">0x10000</span><span class="symbol">:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="number">0x10000</span></span><br><span class="line"><span class="number">65536</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">'\\u&#123;0:04x&#125;'</span>.format(<span class="number">65535</span>)</span><br><span class="line"><span class="string">'\\uffff'</span>   <span class="comment"># OK</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">'\\u&#123;0:04x&#125;'</span>.format(<span class="number">0</span>)</span><br><span class="line"><span class="string">'\\u0000'</span>   <span class="comment"># OK</span></span><br></pre></td></tr></table></figure>
<p><code>u0000~uffff</code>ì— í•´ë‹¹í•˜ëŠ” ë¬¸ìì—´ì˜ ê²½ìš° ìœ„ì— ë³´ì´ëŠ” ê²ƒê³¼ ê°™ì€ í˜•íƒœë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.  </p>
<p>ì½”ë“œë¥¼ ì½ë‹¤ë³´ë‹ˆ <code>u0000~uffff</code>ë¼ëŠ” ë²”ìœ„ëŠ” ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ê²ƒì¼ê¹Œ ë¼ëŠ” ì˜ë¬¸ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.</p>
<ul>
<li>[Plane]<a href="https://en.wikipedia.org/wiki/Plane_(Unicode)" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Plane_(Unicode)</a></li>
<li>[BMP]<a href="https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane</a></li>
</ul>
<p>ìœ„ ë§í¬ë¥¼ ì°¸ì¡°í•˜ì—¬ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´, <code>Plane</code>ì€ 65,536ê°œì˜ ì—°ì†ëœ ì½”ë“œí¬ì¸íŠ¸ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ 17ê°œì˜ <code>plane</code>ì´ ì¡´ì¬í•˜ë©°, <code>u0000~uffff</code>ì€ ì‹­ì§„ìˆ˜ë¡œ ë³€í™˜ì‹œ 0~65,535ì´ê¸°ì— ì²« ë²ˆì§¸ <code>Plane</code>ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><code>BMP</code>ëŠ” <code>Basic Multilingual Plane</code>ì˜ ì•½ìì´ë©°, ì²« ë²ˆì§¸ <code>plane</code>ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì²« ë²ˆì§¸ <code>plane</code>ì¸ <code>BMP</code>ëŠ” í˜„ëŒ€ ì–¸ì–´ì˜ ê±°ì˜ ëª¨ë“  ë¬¸ìì™€ ê¸°í˜¸ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤ê³  í•©ë‹ˆë‹¤. CJKì˜ ë¬¸ìì™€ ê¸°í˜¸ê°€ <code>BMP</code>ì˜ ë§ì€ ë¶€ë¶„ì„ ì°¨ì§€í•˜ê³  ìˆë‹¤ê³  í•©ë‹ˆë‹¤. </p>
<p>ë‹¤ìŒìœ¼ë¡œ <code>else</code> ì ˆì„ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    # surrogate pair</span><br><span class="line">    n -= <span class="number">0x10000</span></span><br><span class="line">    s1 = <span class="number">0xd800</span> | ((n &gt;&gt; <span class="number">10</span>) &amp; <span class="number">0x3ff</span>)</span><br><span class="line">    s2 = <span class="number">0xdc00</span> | (n &amp; <span class="number">0x3ff</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'\\u&#123;0:04x&#125;\\u&#123;1:04x&#125;'</span>.format(s1, s2)</span><br></pre></td></tr></table></figure>
<p><code>surrogate pair</code>ê°€ ë¬´ì—‡ì¸ì§€ ë¶€í„° ì•Œì•„ì•¼ê² ë„¤ìš”. ì•„ë˜ ë‘ ê¸€ì„ ì°¸ì¡°í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. </p>
<ul>
<li><a href="https://stackoverflow.com/questions/5903008/what-is-a-surrogate-pair-in-java" target="_blank" rel="noopener">What is a â€œsurrogate pairâ€ in Java? - stackoverflow</a></li>
</ul>
<ul>
<li><a href="https://en.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener">UTF-16 - Wikipedia</a></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from stackoverflow </span><br><span class="line"></span><br><span class="line">The term "surrogate pair" refers to a means of encoding Unicode characters <span class="keyword">with</span> <span class="keyword">high</span> code-points <span class="keyword">in</span> the UTF<span class="number">-16</span> <span class="keyword">encoding</span> scheme.</span><br><span class="line"></span><br><span class="line"><span class="keyword">In</span> the <span class="keyword">Unicode</span> <span class="built_in">character</span> <span class="keyword">encoding</span>, <span class="keyword">characters</span> <span class="keyword">are</span> mapped <span class="keyword">to</span> <span class="keyword">values</span> <span class="keyword">between</span> <span class="number">0x0</span> <span class="keyword">and</span> <span class="number">0x10FFFF</span>.</span><br><span class="line"></span><br><span class="line">Internally, <span class="keyword">Java</span> uses the UTF<span class="number">-16</span> <span class="keyword">encoding</span> scheme <span class="keyword">to</span> <span class="keyword">store</span> strings <span class="keyword">of</span> <span class="keyword">Unicode</span> text. <span class="keyword">In</span> UTF<span class="number">-16</span>, <span class="number">16</span>-<span class="built_in">bit</span> (two-<span class="keyword">byte</span>) code units <span class="keyword">are</span> used. Since <span class="number">16</span> bits can <span class="keyword">only</span> contain the <span class="keyword">range</span> <span class="keyword">of</span> <span class="keyword">characters</span> <span class="keyword">from</span> <span class="number">0x0</span> <span class="keyword">to</span> <span class="number">0xFFFF</span>, <span class="keyword">some</span> additional complexity <span class="keyword">is</span> used <span class="keyword">to</span> <span class="keyword">store</span> <span class="keyword">values</span> above this <span class="keyword">range</span> (<span class="number">0x10000</span> <span class="keyword">to</span> <span class="number">0x10FFFF</span>). This <span class="keyword">is</span> done <span class="keyword">using</span> pairs <span class="keyword">of</span> code units known <span class="keyword">as</span> surrogates.</span><br><span class="line"></span><br><span class="line">The surrogate code units <span class="keyword">are</span> <span class="keyword">in</span> two ranges known <span class="keyword">as</span> <span class="string">"high surrogates"</span> <span class="keyword">and</span> <span class="string">"low surrogates"</span>, depending <span class="keyword">on</span> whether they <span class="keyword">are</span> allowed <span class="keyword">at</span> the <span class="keyword">start</span> <span class="keyword">or</span> <span class="keyword">end</span> <span class="keyword">of</span> the two-code-unit sequence.</span><br></pre></td></tr></table></figure>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Wikipedia</span><br><span class="line"></span><br><span class="line">Code points <span class="keyword">from</span> the other planes (called Supplementary Planes) are encoded as two <span class="number">16</span>-bit code units called a surrogate pair, by the following scheme:</span><br><span class="line"></span><br><span class="line">Examples</span><br><span class="line">To encode U+<span class="number">10437</span> (ğ·) to UTF<span class="number">-16</span>:</span><br><span class="line"></span><br><span class="line">- Subtract <span class="number">0x10000</span> <span class="keyword">from</span> the code point, leaving <span class="number">0x0437</span>.</span><br><span class="line">- For the high surrogate, shift right by <span class="number">10</span> (divide by <span class="number">0x400</span>), then add <span class="number">0xD800</span>, resulting <span class="keyword">in</span> <span class="number">0x0001</span> + <span class="number">0xD800</span> = <span class="number">0xD801</span>.</span><br><span class="line">- For the low surrogate, take the low <span class="number">10</span> bits (remainder of dividing by <span class="number">0x400</span>), then add <span class="number">0xDC00</span>, resulting <span class="keyword">in</span> <span class="number">0x0037</span> + <span class="number">0xDC00</span> = <span class="number">0xDC37</span>.</span><br><span class="line"></span><br><span class="line">To decode U+<span class="number">10437</span> (ğ·) <span class="keyword">from</span> UTF<span class="number">-16</span>:</span><br><span class="line">- Take the high surrogate (<span class="number">0xD801</span>) <span class="keyword">and</span> subtract <span class="number">0xD800</span>, then multiply by <span class="number">0x400</span>, resulting <span class="keyword">in</span> <span class="number">0x0001</span> Ã— <span class="number">0x400</span> = <span class="number">0x0400</span>.</span><br><span class="line">- Take the low surrogate (<span class="number">0xDC37</span>) <span class="keyword">and</span> subtract <span class="number">0xDC00</span>, resulting <span class="keyword">in</span> <span class="number">0x37</span>.</span><br><span class="line">- Add these two results together (<span class="number">0x0437</span>), <span class="keyword">and</span> finally add <span class="number">0x10000</span> to <span class="keyword">get</span> the <span class="keyword">final</span> decoded UTF<span class="number">-32</span> code point, <span class="number">0x10437</span>.</span><br></pre></td></tr></table></figure>
<p>ë„¤, ì˜ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì—­ì‹œ <code>Wikipedia</code>ì˜ Exampleì„ ë³´ë‹ˆ ì¢€ ì´í•´ê°€ ê°€ë„¤ìš”.</p>
<p>ë‹¤ìŒìœ¼ë¡œ <code>JSONEncoder</code> í´ë˜ìŠ¤ë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>ìœ„ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤. ì°¸ê³ ë¡œ ê°€ë…ì„±ì„ ìœ„í•´ ë©”ì†Œë“œì˜ íŒŒë¼ë¯¸í„°ëŠ” ìƒëµí–ˆìŠµë‹ˆë‹¤.</p>
<ul>
<li><code>__init__()</code></li>
<li><code>default()</code></li>
<li><code>encode()</code></li>
<li><code>iterencode()</code></li>
<li><code>_make_iterencode()</code></li>
</ul>
<p>ìƒì„±ì, í¼ë¸”ë¦­ ë©”ì†Œë“œ ì…‹, í”„ë¼ì´ë¹— ë©”ì†Œë“œ í•˜ë‚˜ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p><code>__init__()</code> : ìƒì„±ìì˜ ê²½ìš° íŠ¹ë³„í•œ ë¡œì§ ì—†ì´ ì…ë ¥ë°›ì€ íŒŒë¼ë¯¸í„°ë¥¼ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ ì§€ì •í•©ë‹ˆë‹¤. ë‹¤ë§Œ ëª‡ëª‡ ë³€ìˆ˜ì˜ ê²½ìš° ì…ë ¥ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ì¡´ì— ìˆëŠ” ë³€ìˆ˜ ë° ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. </p>
<p><code>default()</code> : ì–´ë–¤ ê°’ì´ ì…ë ¥ë˜ì–´ë„ <code>TypeError</code>ë¥¼ ì¼ìœ¼í‚¤ë„ë¡ ë¼ìˆìŠµë‹ˆë‹¤.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">default</span><span class="params">(self, o)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> TypeError(<span class="string">f'Object of type <span class="subst">&#123;o.__class__.__name__&#125;</span> '</span></span><br><span class="line">                    <span class="string">f'is not JSON serializable'</span>)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Specializing JSON object encoding::</span><br><span class="line"></span><br><span class="line">    &gt;&gt;&gt; import json</span><br><span class="line">    &gt;&gt;&gt; def encode_complex(obj):</span><br><span class="line">    <span class="built_in">..</span>.     <span class="keyword">if</span> isinstance(obj, complex):</span><br><span class="line">    <span class="built_in">..</span>.         return [obj.real, obj.imag]</span><br><span class="line">    <span class="built_in">..</span>.     raise TypeError(f<span class="string">'Object of type &#123;obj.__class__.__name__&#125; '</span></span><br><span class="line">    <span class="built_in">..</span>.                     f<span class="string">'is not JSON serializable'</span>)</span><br><span class="line">    <span class="built_in">..</span>.</span><br><span class="line">    &gt;&gt;&gt; json.dumps(2 + 1j, <span class="attribute">default</span>=encode_complex)</span><br><span class="line">    <span class="string">'[2.0, 1.0]'</span></span><br><span class="line">    &gt;&gt;&gt; json.JSONEncoder(<span class="attribute">default</span>=encode_complex).encode(2 + 1j)</span><br><span class="line">    <span class="string">'[2.0, 1.0]'</span></span><br><span class="line">    &gt;&gt;&gt; <span class="string">''</span>.join(json.JSONEncoder(<span class="attribute">default</span>=encode_complex).iterencode(2 + 1j))</span><br><span class="line">    <span class="string">'[2.0, 1.0]'</span></span><br></pre></td></tr></table></figure>
<p>ìœ„ì™€ ê°™ì´ <code>JSONEncoder</code>ë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ë•Œ <code>default</code> íŒŒë¼ë¯¸í„°ì— ìì‹ ì´ ë§Œë“  <code>encode</code>ìš© ë©”ì†Œë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><code>encode()</code> : íŒŒì´ì¬ ìë£Œêµ¬ì¡°ì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ JSONí˜•íƒœì˜ ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.<br><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="keyword">from</span> json.encoder <span class="keyword">import</span> JSONEncoder</span><br><span class="line">&gt;&gt;&gt; JSONEncoder().encode(&#123;<span class="string">"foo"</span>: [<span class="string">"bar"</span>, <span class="string">"baz"</span>]&#125;)</span><br><span class="line">'&#123;<span class="string">"foo"</span>: [<span class="string">"bar"</span>, <span class="string">"baz"</span>]&#125;'</span><br></pre></td></tr></table></figure></p>
<p>ì¡°ê¸ˆ ë” ìì„¸íˆ í•´ë‹¹ ë©”ì†Œë“œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤. </p>
<p>ì²« ë²ˆì§¸ë¡œ ì…ë ¥ë°›ì€ íŒŒë¼ë¯¸í„°ê°€ <code>str</code> ì¸ ê²½ìš° </p>
<p><code>isinstance()</code>ë¡œ íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ì„ ì•Œì•„ëƒ…ë‹ˆë‹¤. <code>str</code>ì´ ë§ë‹¤ë©´ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì¤‘ ensure_asciiì˜ ê°’ì— ë”°ë¼ <code>encode_basestring_ascii()</code> ë˜ëŠ” <code>encode_basestring()</code> ì˜ ê²°ê³¼ê°’ì„ ë°˜í™˜í•˜ë©° ë©”ì†Œë“œê°€ ëì´ ë‚©ë‹ˆë‹¤.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; encoder.encode(<span class="string">'a'</span>)</span><br><span class="line"><span class="string">'"a"'</span></span><br></pre></td></tr></table></figure>
<p>íŒŒë¼ë¯¸í„°ê°€ <code>str</code> ê°€ ì•„ë‹ˆë¼ë©´ ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œ <code>iterencode()</code>ì˜ ë°˜í™˜ê°’ì„ <code>chunks</code>ì— í• ë‹¹í•˜ê³ , <code>chunks</code>ê°€ <code>list</code> ë˜ëŠ” <code>tuple</code>ì´ ì•„ë‹Œê²½ìš° <code>chunks</code> ë¥¼ <code>list</code>ë¡œ ë³€í™˜ì‹œì¼œ <code>return &#39;&#39;.join(chunks)</code>ìœ¼ë¡œ ë³¸ ë©”ì†Œë“œëŠ” ë§ˆë¬´ë¦¬ ë©ë‹ˆë‹¤. </p>
<p><code>iterencode(self, o, _one_shot=False)</code> : ì…ë ¥ëœ ì˜¤ë¸Œì íŠ¸ë¥¼ ì¸ì½”ë“œí•œ í›„ <code>yield</code> í•©ë‹ˆë‹¤. </p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">For</span> <span class="selector-tag">example</span>::</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">for</span> <span class="selector-tag">chunk</span> <span class="selector-tag">in</span> <span class="selector-tag">JSONEncoder</span>()<span class="selector-class">.iterencode</span>(bigobject):</span><br><span class="line">    <span class="selector-tag">mysocket</span><span class="selector-class">.write</span>(chunk)</span><br></pre></td></tr></table></figure>
<p>ì½”ë“œë¥¼ í™•ì¸í•´ ë³´ë‹ˆ<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (_one_shot and c_make_encoder <span class="keyword">is</span> not <span class="type">None</span></span><br><span class="line">        and <span class="keyword">self</span>.indent <span class="keyword">is</span> <span class="type">None</span>):</span><br><span class="line">    _iterencode = c_make_encoder(</span><br><span class="line">        markers, <span class="keyword">self</span>.<span class="keyword">default</span>, _encoder, <span class="keyword">self</span>.indent,</span><br><span class="line">        <span class="keyword">self</span>.key_separator, <span class="keyword">self</span>.item_separator, <span class="keyword">self</span>.sort_keys,</span><br><span class="line">        <span class="keyword">self</span>.skipkeys, <span class="keyword">self</span>.allow_nan)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    _iterencode = _make_iterencode(</span><br><span class="line">        markers, <span class="keyword">self</span>.<span class="keyword">default</span>, _encoder, <span class="keyword">self</span>.indent, floatstr,</span><br><span class="line">        <span class="keyword">self</span>.key_separator, <span class="keyword">self</span>.item_separator, <span class="keyword">self</span>.sort_keys,</span><br><span class="line">        <span class="keyword">self</span>.skipkeys, _one_shot)</span><br><span class="line"><span class="keyword">return</span> _iterencode(o, <span class="number">0</span>)</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<p><code>iterencode()</code>ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ì…ë ¥ë°›ì•„ <code>_make_iterencode()</code> ë©”ì†Œë“œë¥¼ ë¶€ë¥´ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p><code>encoder.py</code> ì˜ ì¸ì½”ë”©í•˜ëŠ” ì£¼ìš” ë¡œì§ì€ <code>_make_iterencode()</code>ì— ìˆì—ˆìŠµë‹ˆë‹¤. í”„ë¼ì´ë¹— ë©”ì†Œë“œë¼ì„œ ì•ˆë³´ê³  ë„˜ì–´ê°€ë ¤ê³  í–ˆëŠ”ë° ë³¼ ìˆ˜ ë°–ì— ì—†ê² êµ°ìš”.</p>
<p><code>_make_iterencode()</code> ëŠ” ë‚´ë¶€ì— ì„¸ê°œì˜ í”„ë¼ì´ë¹— ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. </p>
<p>ê°ê°ì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. </p>
<ul>
<li><code>_iterencode()</code> : ë¡œì§ì´ ì²˜ìŒìœ¼ë¡œ ì‹œì‘ë˜ëŠ” ë©”ì†Œë“œì…ë‹ˆë‹¤. ì…ë ¥ëœ ì˜¤ë¸Œì íŠ¸ì˜ íƒ€ì…ì— ë”°ë¼ ì ì ˆí•œ ë©”ì†Œë“œë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤.</li>
<li><code>_iterencode_list()</code> : ì˜¤ë¸Œì íŠ¸ê°€ ë¦¬ìŠ¤íŠ¸ í˜¹ì€ íŠœí”Œ íƒ€ì…</li>
<li><code>_iterencode_dict()</code> : ì˜¤ë¸Œì íŠ¸ê°€ ë”•ì…”ë„ˆë¦¬ íƒ€ì…</li>
</ul>
<p><code>def _iterencode(o, _current_indent_level):</code> ë¥¼ ì¢€ ë” ìì„¸íˆ ë³´ê² ìŠµë‹ˆë‹¤. </p>
<p>ì…ë ¥ëœ ì˜¤ë¸Œì íŠ¸ì˜ íƒ€ì…ì— ë”°ë¼ ì ì ˆí•œ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. [<code>str</code>, <code>None</code>, <code>Bool</code>, <code>int</code>, <code>float</code>, <code>list</code>, <code>tuple</code>, <code>dict</code>] ì´ì™¸ì˜ íƒ€ì…ì€ <code>else</code> ì ˆë¡œ ë¶„ê¸°ì²˜ë¦¬ë©ë‹ˆë‹¤. </p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def <span class="constructor">_iterencode(<span class="params">o</span>, <span class="params">_current_indent_level</span>)</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> markers is not None:</span><br><span class="line">        markerid = id(o)</span><br><span class="line">        <span class="keyword">if</span> markerid <span class="keyword">in</span> markers:</span><br><span class="line">            raise <span class="constructor">ValueError(<span class="string">"Circular reference detected"</span>)</span></span><br><span class="line">        markers<span class="literal">[<span class="identifier">markerid</span>]</span> = o</span><br><span class="line">    o = <span class="constructor">_default(<span class="params">o</span>)</span></span><br><span class="line">    yield from <span class="constructor">_iterencode(<span class="params">o</span>, <span class="params">_current_indent_level</span>)</span></span><br><span class="line">    <span class="keyword">if</span> markers is not None:</span><br><span class="line">        del markers<span class="literal">[<span class="identifier">markerid</span>]</span></span><br></pre></td></tr></table></figure>
<p>ë‹¤ìŒ ë¡œì§ì€ <code>markers</code> ì˜ ê°’ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤. <code>markers</code>ëŠ” <code>iterencode()</code> ë©”ì†Œë“œ ì•ˆì—ì„œ check_circularì˜ ê°’ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤. </p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">iterencode</span><span class="params">(<span class="keyword">self</span>, o, _one_shot=False)</span></span><span class="symbol">:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.<span class="symbol">check_circular:</span></span><br><span class="line">        markers = &#123;&#125;</span><br><span class="line">    <span class="symbol">else:</span></span><br><span class="line">        markers = None</span><br></pre></td></tr></table></figure>
<p><code>check_circular</code>ì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">If check_circular is true, then lists, dicts,<span class="built_in"> and </span>custom encoded</span><br><span class="line">objects will be checked for circular references during encoding to</span><br><span class="line">prevent an infinite recursion (which would cause an OverflowError).</span><br><span class="line">Otherwise, no such<span class="built_in"> check </span>takes place.</span><br></pre></td></tr></table></figure>
<p>ì¸ì½”ë”©ì¤‘ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ” <code>infinite recursion(ë¬´í•œ ì¬ê·€)</code> ë¥¼ ë§‰ê¸°ìœ„í•œ íŒŒë¼ë¯¸í„°ë¡œ <code>true</code>ì¸ ê²½ìš° <code>circular references</code> ì—¬ë¶€ë¥¼ ê²€ì‚¬í•©ë‹ˆë‹¤. </p>
<p><code>JSONEncoder</code> ìƒì„±ìì˜ <code>check_circular=True</code> ì™€ ê°™ì€ ê¸°ë³¸ ê°’ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. íŠ¹ë³„íˆ <code>False</code>ë¡œ ì§€ì •í•˜ì§€ ì•ŠëŠ” í•œ ìˆœí™˜ ì°¸ì¡°ì™€ ê´€ë ¨í•œ ê²€ì‚¬ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤. </p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def <span class="constructor">_iterencode(<span class="params">o</span>, <span class="params">_current_indent_level</span>)</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> markers is not None:</span><br><span class="line">        markerid = id(o)</span><br><span class="line">        <span class="keyword">if</span> markerid <span class="keyword">in</span> markers:</span><br><span class="line">            raise <span class="constructor">ValueError(<span class="string">"Circular reference detected"</span>)</span></span><br><span class="line">        markers<span class="literal">[<span class="identifier">markerid</span>]</span> = o</span><br><span class="line">    o = <span class="constructor">_default(<span class="params">o</span>)</span></span><br><span class="line">    yield from <span class="constructor">_iterencode(<span class="params">o</span>, <span class="params">_current_indent_level</span>)</span></span><br><span class="line">    <span class="keyword">if</span> markers is not None:</span><br><span class="line">        del markers<span class="literal">[<span class="identifier">markerid</span>]</span></span><br></pre></td></tr></table></figure>
<p>ë‹¤ì‹œ <code>_iterencode()</code> ì½”ë“œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤. íŠ¹ë³„í•œ ë³€ê²½ì´ ì—†ë‹¤ë©´ <code>markers</code>ëŠ” ë¹ˆ ë”•ì…”ë„ˆë¦¬ë¥¼ ê°’ìœ¼ë¡œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë¹ŒíŠ¸ì¸ ë©”ì†Œë“œ <code>id()</code> ë¥¼ í†µí•´ ì…ë ¥ë°›ì€ ì˜¤ë¸Œì íŠ¸ì˜ ì‹ë³„ê°’ì„ <code>makers</code>ì˜ <code>key</code>, ì˜¤ë¸Œì íŠ¸ë¥¼ <code>value</code>ë¡œ í• ë‹¹í•©ë‹ˆë‹¤. </p>
<p>ë‹¤ìŒìœ¼ë¡œ <code>_default()</code> ë©”ì†Œë“œë¡œ ì˜¤ë¸Œì íŠ¸ ì§ë ¬í™” ê°€ëŠ¥í•œ ê°ì²´ë¡œ ë³€í™˜ì‹œí‚µë‹ˆë‹¤. ë§Œì•½ ì§ë ¬í™” ê°€ëŠ¥í•˜ì§€ ì•Šë‹¤ë©´ <code>TypeError</code>ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤.</p>
<p><a href="https://docs.python.org/3/library/json.html#json.JSONEncoder" target="_blank" rel="noopener">json - python3 official document</a>ì—ì„œ <code>default()</code> ë©”ì†Œë“œì— ê´€í•œ ì„¤ëª…ì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. </p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">returns</span> a <span class="keyword">serializable</span> <span class="keyword">object</span> <span class="keyword">for</span> o <span class="keyword">if</span> possible, otherwise it should <span class="keyword">call</span> the superclass implementation (<span class="keyword">to</span> <span class="keyword">raise</span> TypeError).</span><br></pre></td></tr></table></figure>
<p>ì§ë ¬í™” ëœ ê°ì²´ë¥¼ ë‹¤ì‹œ ë³¸ ë©”ì†Œë“œ(<code>_iterencode()</code>)ì˜ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì–´ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. <code>yield from</code> ì˜ˆì•½ í‚¤ì›Œë“œë¥¼ í†µí•´ ë³¸ ë©”ì†Œë“œì˜ ë°˜í™˜ ê°’ì„ <code>yield</code> í•©ë‹ˆë‹¤. ê·¸ í›„ <code>markers</code> ì—ì„œ <code>makerid</code> í‚¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤.</p>
<p>(yield ë²ˆì—­ì„ ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ì˜ ëª¨ë¥´ê² ë„¤ìš”â€¦)</p>
<p><code>yield from</code> í‘œí˜„ì‹ì— ìµìˆ™ì¹˜ ì•Šì•„ì„œ ê·¸ëŸ°ì§€ ì¢€ ì°¾ì•„ë´¤ìŠµë‹ˆë‹¤.</p>
<ul>
<li><a href="https://docs.python.org/3/whatsnew/3.3.html" target="_blank" rel="noopener">https://docs.python.org/3/whatsnew/3.3.html</a></li>
<li>New syntax features:</li>
<li>New <code>yield from</code> expression for <a href="https://docs.python.org/3/whatsnew/3.3.html#pep-380" target="_blank" rel="noopener">generator delegation</a>.</li>
</ul>
<p><code>generator delegation</code> ì œë„ˆë ˆì´í„° ìœ„ì„ì´ë¼â€¦ ì •í™•í•œ ë‚´ìš©ì€ ë¬¸ì„œë¥¼ ì¢€ ë” ì½ì–´ë³´ê² ìŠµë‹ˆë‹¤. ì¶”ê°€ë¡œ ê¸°ì¡´ì— ìˆë˜ <code>yeild</code> ì™€ ì–´ë–¤ ì°¨ì´ê°€ ìˆëŠ”ì§€ë„ ì•Œì•„ë‘ê³  ì‹¶ë„¤ìš”.</p>
<p>ì¼ë‹¨ <code>3.3</code>ì— ì¶”ê°€ëœ ê¸°ëŠ¥ì´êµ°ìš”. </p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PEP <span class="number">380</span> adds <span class="keyword">the</span> <span class="string">'yield from'</span> expression, allowing <span class="keyword">a</span> generator <span class="built_in">to</span> delegate part <span class="keyword">of</span> its operations <span class="built_in">to</span> another generator. This allows <span class="keyword">a</span> section <span class="keyword">of</span> code containing yield <span class="built_in">to</span> be factored out <span class="keyword">and</span> placed <span class="keyword">in</span> another generator. Additionally, <span class="keyword">the</span> subgenerator is allowed <span class="built_in">to</span> <span class="literal">return</span> <span class="keyword">with</span> <span class="keyword">a</span> <span class="built_in">value</span>, <span class="keyword">and</span> <span class="keyword">the</span> <span class="built_in">value</span> is made available <span class="built_in">to</span> <span class="keyword">the</span> delegating generator.</span><br></pre></td></tr></table></figure>
<p>í•´ì„ì€ ì—¬ëŸ¬ë¶„ë“¤ ê°ìì—ê²Œ ë§¡ê¸°ê² ìŠµë‹ˆë‹¤.</p>
<p>ì´ê²ƒìœ¼ë¡œ <code>json/encoder.py</code> ì½ì–´ë³´ê¸°ê°€ ëë‚¬ìŠµë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œëŠ” <code>decoder.py</code> ê°€ ì´ì–´ì§‘ë‹ˆë‹¤.</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archive</a></li>
         
          <li><a href="/categories/">Category</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#json-JSON-encoder-and-decoder"><span class="toc-number">1.</span> <span class="toc-text">json - JSON encoder and decoder</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://urangurang.github.io/code-reading-json-encoder/" target="_blank" rel="noopener"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://urangurang.github.io/code-reading-json-encoder/&text=íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json/encoder.py" target="_blank" rel="noopener"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://urangurang.github.io/code-reading-json-encoder/&title=íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json/encoder.py" target="_blank" rel="noopener"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=íŒŒì´ì¬ ì½”ë“œ ì½ì–´ë³´ê¸° - json/encoder.py&body=Check out this article: https://urangurang.github.io/code-reading-json-encoder/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2020 urangurang
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archive</a></li>
         
          <li><a href="/categories/">Category</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/lib/meslo-LG/styles.css">


<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>



    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-158081532-1', 'auto');
        ga('send', 'pageview');
    </script>



